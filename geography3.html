<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专祝 爪注专 - 注专转 </title>
    <style>
        :root {
            --primary: #2980b9;
            --secondary: #2c3e50;
            --success: #27ae60;
            --error: #c0392b;
            --bg: #f0f2f5;
            --surface: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /*    */
        .nav-bar {
            background: var(--secondary);
            width: 100%;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-btn {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .nav-btn.active, .nav-btn:hover {
            background: white;
            color: var(--secondary);
            font-weight: bold;
        }

        .container {
            background: var(--surface);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            max-width: 800px;
            width: 90%;
            margin-top: 2rem;
            text-align: center;
            display: none;
        }

        .container.active-view {
            display: block;
        }

        h2 { color: var(--secondary); margin-bottom: 1.5rem; }

        .score-box {
            background: #dfe6e9;
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .feedback {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 1.5em;
        }
        
        button.action-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 30px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
        }
        
        button.action-btn:hover { background: #1c5980; }

        /* ---  拽 1 --- */
        .map-ref {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
            max-height: 250px;
            object-fit: contain;
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .opt-btn {
            padding: 15px;
            border: 2px solid #bdc3c7;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .opt-btn:hover { background: #ecf0f1; }
        .opt-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .opt-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        /* ---  拽 2 (驻) --- */
        .map-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
        }
        .map-interactive {
            width: 100%;
            display: block;
            border-radius: 10px;
            border: 2px solid #ccc;
        }
        .map-point {
            position: absolute;
            width: 25px;
            height: 25px;
            background: rgba(255, 255, 255, 0.8);
            border: 3px solid var(--primary);
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            transition: transform 0.2s, background 0.2s;
            z-index: 10;
        }
        .map-point:hover {
            transform: translate(-50%, -50%) scale(1.3);
            background: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .map-point.correct-anim {
            background: var(--success);
            border-color: #1e8449;
            animation: pulse 1s infinite;
        }
        .map-point.wrong-anim {
            background: var(--error);
            border-color: #922b21;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); }
        }

        /* ---  拽 3 (砖 - 拽) --- */
        .concept-card {
            background: #eef2f3;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .input-area {
            display: none; /* 住转专 专专转  */
            margin-top: 15px;
        }
        
        .answer-input {
            padding: 10px;
            font-size: 1.2rem;
            width: 60%;
            border: 2px solid var(--secondary);
            border-radius: 5px;
            text-align: center;
        }

        .check-btn {
            padding: 10px 20px;
            font-size: 1.2rem;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }

    </style>
</head>
<body>

    <nav class="nav-bar">
        <button class="nav-btn active" onclick="switchTab('directions')">1. </button>
        <button class="nav-btn" onclick="switchTab('map')">2. 专转 驻</button>
        <button class="nav-btn" onclick="switchTab('concepts')">3. 砖</button>
    </nav>

    <div id="directions" class="container active-view">
        <h2>Л  注</h2>
        <div class="score-box">拽: <span id="score1">0</span></div>
        <img src="continents.jpg" alt="驻转 注专" class="map-ref">
        <div class="concept-card" id="q1-text">砖...</div>
        <div class="options-grid" id="q1-options"></div>
        <div class="feedback" id="f1"></div>
        <button class="action-btn" onclick="nextQ1()" id="btn1" style="display:none"></button>
    </div>

    <div id="map" class="container">
        <h2> 转专 驻: <span id="target-name" style="color:var(--primary); font-size:1.5em; text-decoration: underline;">...</span></h2>
        <div class="score-box">拽: <span id="score2">0</span></div>
        
        <div class="map-container">
            <img src="continents_blank.jpg" alt="驻 转" class="map-interactive">
            
            <div class="map-point" style="top: 25%; left: 20%;" onclick="checkMap(this, '爪驻 专拽')"></div>
            <div class="map-point" style="top: 65%; left: 30%;" onclick="checkMap(this, '专 专拽')"></div>
            <div class="map-point" style="top: 25%; left: 52%;" onclick="checkMap(this, '专驻')"></div>
            <div class="map-point" style="top: 50%; left: 53%;" onclick="checkMap(this, '驻专拽')"></div>
            <div class="map-point" style="top: 25%; left: 75%;" onclick="checkMap(this, '住')"></div>
            <div class="map-point" style="top: 72%; left: 88%;" onclick="checkMap(this, '住专')"></div>
            <div class="map-point" style="top: 92%; left: 50%;" onclick="checkMap(this, '专拽拽')"></div>

            <div class="map-point" style="top: 45%; left: 38%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 ')"></div>
            <div class="map-point" style="top: 50%; left: 5%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 砖拽')"></div>
            <div class="map-point" style="top: 50%; left: 95%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 砖拽')"></div>
            <div class="map-point" style="top: 60%; left: 70%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 ')"></div>
            <div class="map-point" style="top: 5%; left: 60%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 专拽')"></div>
            <div class="map-point" style="top: 85%; left: 20%; background: rgba(135, 206, 235, 0.6); border-color:blue;" onclick="checkMap(this, '拽住 专')"></div>
        </div>
        
        <div class="feedback" id="f2">抓 注 注 转 驻</div>
    </div>

    <div id="concepts" class="container">
        <h2>  砖</h2>
        <div class="score-box">拽: <span id="score3">0</span></div>
        
        <div class="concept-card" id="q3-text">砖...</div>
        
        <div class="options-grid" id="q3-options"></div>
        
        <div class="input-area" id="q3-input-area">
            <input type="text" id="user-input" class="answer-input" placeholder="拽  转 转砖...">
            <button class="check-btn" onclick="checkTypeAnswer()">拽</button>
        </div>

        <div class="feedback" id="f3"></div>
        <button class="action-btn" onclick="nextQ3()" id="btn3" style="display:none"></button>
    </div>

    <script>
        // ---   ---
        function switchTab(tabId) {
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active-view'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active-view');
            
            const index = tabId === 'directions' ? 0 : tabId === 'map' ? 1 : 2;
            document.querySelectorAll('.nav-btn')[index].classList.add('active');

            if(tabId === 'map' && mapTargets.length > 0) loadMapTarget();
        }

        // --- 拽 砖转驻转 ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // --- 拽 1:  ---
        const q1Data = [
            { t: " 砖转 爪转 专 专驻?", c: "驻专拽", o: ["驻专拽", "住", "住专"] },
            { t: " 拽住 爪  专拽 专驻?", c: "拽住 ", o: ["拽住 ", "拽住 砖拽", "拽住 "] },
            { t: " 砖转  专转 转专?", c: "专拽拽", o: ["驻专拽", "专 专拽", "专拽拽"] },
            { t: " 爪转 砖专 住  转?", c: "专", o: ["注专", "专", "爪驻"] },
            { t: "住 爪转 专 ...", c: "专驻", o: ["专驻", "专拽", "住专"] }
        ];
        let idx1 = 0, sc1 = 0;
        
        function loadQ1() {
            if (idx1 >= q1Data.length) {
                document.getElementById('directions').innerHTML = `<h2>住转 转 拽 !</h2><p>爪: ${sc1}</p><button class='action-btn' onclick='location.reload()'>转 砖</button>`;
                return;
            }
            const q = q1Data[idx1];
            document.getElementById('q1-text').innerText = q.t;
            const opts = document.getElementById('q1-options');
            opts.innerHTML = '';
            document.getElementById('f1').innerText = '';
            document.getElementById('btn1').style.display = 'none';
            
            let allOpts = [q.c, ...q.o];
            shuffle(allOpts);
            
            allOpts.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => {
                    if(document.getElementById('btn1').style.display !== 'none') return;
                    if(opt === q.c) {
                        btn.classList.add('correct');
                        sc1 += 10;
                        document.getElementById('f1').innerText = ' !';
                    } else {
                        btn.classList.add('wrong');
                        document.getElementById('f1').innerText = ' . 转砖 : ' + q.c;
                    }
                    document.getElementById('score1').innerText = sc1;
                    document.getElementById('btn1').style.display = 'inline-block';
                };
                opts.appendChild(btn);
            });
        }
        function nextQ1() { idx1++; loadQ1(); }


        // --- 拽 2: 驻 转 ---
        const mapTargetsOrig = [
            "爪驻 专拽", "专 专拽", "专驻", "驻专拽", "住", "住专", "专拽拽",
            "拽住 ", "拽住 砖拽", "拽住 ", "拽住 专拽"
        ];
        let mapTargets = [...mapTargetsOrig];
        shuffle(mapTargets);
        let sc2 = 0;
        let currentTarget = "";
        let mapLocked = false;

        function loadMapTarget() {
            if (mapTargets.length === 0) {
                document.getElementById('target-name').innerText = "住转 转  驻!";
                document.getElementById('f2').innerText = `爪 住驻: ${sc2}`;
                return;
            }
            currentTarget = mapTargets[0];
            document.getElementById('target-name').innerText = currentTarget;
            document.getElementById('f2').innerText = "抓 注 注 转";
            document.getElementById('f2').style.color = "black";
            mapLocked = false;
            document.querySelectorAll('.map-point').forEach(p => {
                p.classList.remove('correct-anim', 'wrong-anim');
            });
        }

        function checkMap(el, locationName) {
            if(mapLocked || mapTargets.length === 0) return;
            mapLocked = true;

            if (locationName === currentTarget) {
                el.classList.add('correct-anim');
                document.getElementById('f2').innerText = "注! 爪转.";
                document.getElementById('f2').style.color = "var(--success)";
                sc2 += 10;
                document.getElementById('score2').innerText = sc2;
                setTimeout(() => { mapTargets.shift(); loadMapTarget(); }, 1500);
            } else {
                el.classList.add('wrong-anim');
                document.getElementById('f2').innerText = "注转,  " + locationName;
                document.getElementById('f2').style.color = "var(--error)";
                setTimeout(() => { el.classList.remove('wrong-anim'); mapLocked = false; }, 1000);
            }
        }


        // --- 拽 3: 砖 (拽 砖) ---
        // 专 砖 专转
        const conceptsDB = [
            { term: "", def: "砖 砖 拽祝   爪" },
            { term: "爪 ", def: "砖 砖 拽祝  砖砖 " },
            { term: "专驻", def: "拽爪 砖  住" },
            { term: "爪专", def: "专爪注转  爪专 专转  砖  " },
            { term: "驻专抓", def: "砖  专转  砖" },
            { term: "拽住", def: "拽   注拽 驻专  砖转" },
            { term: "砖转", def: "砖 砖 注爪 专爪祝 注 驻 专 专抓" }
        ];

        let questionsQ3 = []; 
        let currentQ3 = null;
        let idx3 = 0, sc3 = 0;

        // 转 专砖转 砖转 注专转
        function initQ3() {
            questionsQ3 = [];
            // 爪专转 2 住 砖转 注专  砖 = 14 砖转 住" (驻砖专 拽爪专)
            conceptsDB.forEach(item => {
                // 住 1: 专转 专 (专拽)
                questionsQ3.push({ type: 'select_def', term: item.term, correctDef: item.def });
                // 住 2: 拽转 砖
                questionsQ3.push({ type: 'type_term', term: item.term, def: item.def });
            });
            shuffle(questionsQ3);
            loadQ3();
        }

        function loadQ3() {
            if (idx3 >= questionsQ3.length) {
                document.getElementById('concepts').innerHTML = `<h2>住转 转 !</h2><p>爪: ${sc3}</p><button class='action-btn' onclick='location.reload()'>转 砖</button>`;
                return;
            }
            
            currentQ3 = questionsQ3[idx3];
            document.getElementById('f3').innerText = '';
            document.getElementById('btn3').style.display = 'none';
            document.getElementById('user-input').value = '';

            const textField = document.getElementById('q3-text');
            const optionsDiv = document.getElementById('q3-options');
            const inputArea = document.getElementById('q3-input-area');

            if (currentQ3.type === 'select_def') {
                // 转爪: 砖 转, 专 转 专
                inputArea.style.display = 'none';
                optionsDiv.style.display = 'grid';
                
                textField.innerHTML = ` <b>${currentQ3.term}</b>?`;
                
                // 爪专转 住
                let distractors = conceptsDB.filter(c => c.def !== currentQ3.correctDef).map(c => c.def);
                shuffle(distractors);
                let options = [currentQ3.correctDef, distractors[0], distractors[1], distractors[2]];
                shuffle(options);

                optionsDiv.innerHTML = '';
                options.forEach(opt => {
                    const btn = document.createElement('div');
                    btn.className = 'opt-btn';
                    btn.innerText = opt;
                    btn.onclick = () => checkSelectDef(btn, opt);
                    optionsDiv.appendChild(btn);
                });

            } else {
                // 转爪: 专 转转, 拽 转 砖
                optionsDiv.style.display = 'none';
                inputArea.style.display = 'block';
                
                textField.innerHTML = ` 拽专: <b>${currentQ3.def}</b>?`;
            }
        }

        function checkSelectDef(btn, selectedDef) {
            if (document.getElementById('btn3').style.display !== 'none') return; // 注转 爪 驻

            if (selectedDef === currentQ3.correctDef) {
                btn.classList.add('correct');
                document.getElementById('f3').innerText = ' !';
                document.getElementById('f3').style.color = 'var(--success)';
                sc3 += 10;
            } else {
                btn.classList.add('wrong');
                document.getElementById('f3').innerText = ' . 住 专 驻注 .';
                document.getElementById('f3').style.color = 'var(--error)';
                
                // 住 转砖 
                document.querySelectorAll('#q3-options .opt-btn').forEach(b => {
                    if (b.innerText === currentQ3.correctDef) b.classList.add('correct');
                });
            }
            document.getElementById('score3').innerText = sc3;
            document.getElementById('btn3').style.display = 'inline-block';
        }

        function checkTypeAnswer() {
            if (document.getElementById('btn3').style.display !== 'none') return;

            const userText = document.getElementById('user-input').value.trim();
            if (!userText) return; //  拽  专拽

            if (userText === currentQ3.term) {
                document.getElementById('f3').innerText = ' ! 转砖 拽转.';
                document.getElementById('f3').style.color = 'var(--success)';
                sc3 += 10;
            } else {
                document.getElementById('f3').innerText = ' 拽... 转砖 : ' + currentQ3.term;
                document.getElementById('f3').style.color = 'var(--error)';
            }
            document.getElementById('score3').innerText = sc3;
            document.getElementById('btn3').style.display = 'inline-block';
        }

        function nextQ3() { idx3++; loadQ3(); }

        // 转
        loadQ1();
        loadMapTarget();
        initQ3();

    </script>
</body>
</html>